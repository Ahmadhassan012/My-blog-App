---
layout: base.njk
title: Search Results
---

<div class="search-results">
  <h1>Search Results</h1>
  <div id="search-results-container"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const searchResultsContainer = document.getElementById('search-results-container');
    const urlParams = new URLSearchParams(window.location.search);
    const query = urlParams.get('q');

    if (query) {
      fetch('/posts.json')
        .then(response => response.json())
        .then(posts => {
          const results = posts.filter(post => {
            const titleMatch = post.title.toLowerCase().includes(query.toLowerCase());
            const contentMatch = post.content.toLowerCase().includes(query.toLowerCase());
            return titleMatch || contentMatch;
          });

          if (results.length > 0) {
            let html = '<ul>';
            results.forEach(post => {
              html += `<li><a href="${post.url}">${post.title}</a></li>`;
            });
            html += '</ul>';
            searchResultsContainer.innerHTML = html;
          } else {
            searchResultsContainer.innerHTML = '<p>No results found.</p>';
          }
        })
        .catch(error => {
          console.error('Error fetching search data:', error);
          searchResultsContainer.innerHTML = '<p>There was an error performing the search.</p>';
        });
    } else {
      searchResultsContainer.innerHTML = '<p>Please enter a search term.</p>';
    }
  });
</script>
